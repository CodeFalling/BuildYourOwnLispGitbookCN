<!DOCTYPE HTML>
<html lang="en-US" manifest="./manifest.appcache">
    
    <head>
        
        <meta charset="UTF-8">
        <title>Languages | 介绍</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 0.7.1">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    <meta name="author" content="CodeFalling">
    
    
    <link rel="next" href="./parsing.html" />
    
    
    <link rel="prev" href="./interactive_prompt.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="gitbook/style.css">


        
    <div class="book" data-github="CodeFalling/BuildYourOwnLispGitbookCN" data-level="4" data-basepath="." data-revision="1408641508973">
    <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    
    <a href="https://github.com/CodeFalling/BuildYourOwnLispGitbookCN" target="_blank" class="btn pull-left home-bookmark" aria-label="GitHub home"><i class="fa fa-bookmark-o"></i></a>
    
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    <span id="font-settings-wrapper">
        <a href="#" class="btn pull-left toggle-font-settings" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="btn-group btn-block">
        <button id="reduce-font-size" class="btn btn-default">A</button>
        <button id="enlarge-font-size" class="btn btn-default">A</button>
    </div>

    <ul class="list-group font-family-list">
        <li class="list-group-item" data-font="0">Serif</li>
        <li class="list-group-item" data-font="1">Sans</li>
    </ul>

    <div class="btn-group btn-group-xs btn-block color-theme-list">
        <button type="button" class="btn btn-default" id="color-theme-preview-0" data-theme="0">White</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-1" data-theme="1">Sepia</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-2" data-theme="2">Night</button>
    </div>
</div>

    </span>

    <!-- Actions Right -->
    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-spinner fa-spin"></i>
        <a href="./" >介绍</a>
    </h1>
</div>

    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        <li>
            <a href="https://github.com/CodeFalling" target="blank" class="author-link">About the author</a>
        </li>
        

        
        
        <li>
            <a href="https://github.com/CodeFalling/BuildYourOwnLispGitbookCN/issues" target="blank" class="issues-link">Questions and Issues</a>
        </li>
        

        
        
        <li>
            <a href="https://github.com/CodeFalling/BuildYourOwnLispGitbookCN/edit/master/languages.md" target="blank" class="contribute-link">Edit and Contribute</a>
        </li>
        

	

        
        <li class="divider"></li>
        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" data-path="installation.html">
            
                
                    <a href="./installation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         Installation
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2" data-path="basics.html">
            
                
                    <a href="./basics.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         Basics
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3" data-path="interactive_prompt.html">
            
                
                    <a href="./interactive_prompt.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         Interactive Prompt
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter active" data-level="4" data-path="languages.html">
            
                
                    <a href="./languages.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                         Languages
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5" data-path="parsing.html">
            
                
                    <a href="./parsing.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                         Parsing
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6" data-path="evaluation.html">
            
                
                    <a href="./evaluation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                         Evaluation
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7" data-path="error_handling.html">
            
                
                    <a href="./error_handling.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                         Error Handling
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8" data-path="s_expressions.html">
            
                
                    <a href="./s_expressions.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                         S-Expressions
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="9" data-path="q_expressions.html">
            
                
                    <a href="./q_expressions.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                         Q-Expressions
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="10" data-path="variables.html">
            
                
                    <a href="./variables.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                         Variables
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="11" data-path="functions.html">
            
                
                    <a href="./functions.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                         Functions
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="12" data-path="conditionals.html">
            
                
                    <a href="./conditionals.html">
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                         Conditionals
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="13" data-path="strings.html">
            
                
                    <a href="./strings.html">
                        <i class="fa fa-check"></i>
                        
                            <b>13.</b>
                        
                         Strings
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="14" data-path="standard_library.html">
            
                
                    <a href="./standard_library.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.</b>
                        
                         Standard Library
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="15" data-path="bonus_projects.html">
            
                
                    <a href="./bonus_projects.html">
                        <i class="fa fa-check"></i>
                        
                            <b>15.</b>
                        
                         Bonus Projects
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="16" data-path="faq.html">
            
                
                    <a href="./faq.html">
                        <i class="fa fa-check"></i>
                        
                            <b>16.</b>
                        
                         FAQ
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="17" data-path="credits.html">
            
                
                    <a href="./credits.html">
                        <i class="fa fa-check"></i>
                        
                            <b>17.</b>
                        
                         Credits
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Generated using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 23.529411764705884%;min-width: 17.647058823529413%;"></div>
    </div>
    <div class="chapters">
    
        <a href="./index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="./installation.html" title="Installation" class="chapter done new-chapter" data-progress="1" style="left: 5.882352941176471%;"></a>
    
        <a href="./basics.html" title="Basics" class="chapter done new-chapter" data-progress="2" style="left: 11.764705882352942%;"></a>
    
        <a href="./interactive_prompt.html" title="Interactive Prompt" class="chapter done new-chapter" data-progress="3" style="left: 17.647058823529413%;"></a>
    
        <a href="./languages.html" title="Languages" class="chapter done new-chapter" data-progress="4" style="left: 23.529411764705884%;"></a>
    
        <a href="./parsing.html" title="Parsing" class="chapter  new-chapter" data-progress="5" style="left: 29.41176470588235%;"></a>
    
        <a href="./evaluation.html" title="Evaluation" class="chapter  new-chapter" data-progress="6" style="left: 35.294117647058826%;"></a>
    
        <a href="./error_handling.html" title="Error Handling" class="chapter  new-chapter" data-progress="7" style="left: 41.1764705882353%;"></a>
    
        <a href="./s_expressions.html" title="S-Expressions" class="chapter  new-chapter" data-progress="8" style="left: 47.05882352941177%;"></a>
    
        <a href="./q_expressions.html" title="Q-Expressions" class="chapter  new-chapter" data-progress="9" style="left: 52.94117647058823%;"></a>
    
        <a href="./variables.html" title="Variables" class="chapter  " data-progress="10" style="left: 58.8235294117647%;"></a>
    
        <a href="./functions.html" title="Functions" class="chapter  " data-progress="11" style="left: 64.70588235294117%;"></a>
    
        <a href="./conditionals.html" title="Conditionals" class="chapter  " data-progress="12" style="left: 70.58823529411765%;"></a>
    
        <a href="./strings.html" title="Strings" class="chapter  " data-progress="13" style="left: 76.47058823529412%;"></a>
    
        <a href="./standard_library.html" title="Standard Library" class="chapter  " data-progress="14" style="left: 82.3529411764706%;"></a>
    
        <a href="./bonus_projects.html" title="Bonus Projects" class="chapter  " data-progress="15" style="left: 88.23529411764706%;"></a>
    
        <a href="./faq.html" title="FAQ" class="chapter  " data-progress="16" style="left: 94.11764705882354%;"></a>
    
        <a href="./credits.html" title="Credits" class="chapter  " data-progress="17" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_12">
                    
                        <h1 id="">语言</h1>
<h2 id="">什么是编程语言?</h2>
<p>一个编程语言和真实的语言是很相似的。它背后有一个结构和一些规则。当我们阅读和书写自然语言时，我们不知不觉便学到了这些规则， 编程语言也是这样的。我们可以利用规则来理解他人，说话或者写出代码。</p>
<p>20世纪50年代语言学家 <em>Noam Chomsky</em> 形式化了大量关于语言的 <a href="http://en.wikipedia.org/wiki/Chomsky_hierarchy" target="_blank">重要观察</a>。这些中的许多构成了我们今天的语言理解的基础。其中的一个就是观察自然语言的递归建立了递归和重复的子结构。</p>
<p><img src="img/cat.png" alt="cat" title="Cat &bull; cannot speak or program"></p>
<p>作为一个例子，我们可以看看下面这个短语。</p>
<p>&rsaquo; <code>The cat walked on the carpet.</code></p>
<p>用英语的规则，名词 <code>cat</code> 可以被两个由 <code>and</code> 连接的名词替代。</p>
<p>&rsaquo; <code>The <strong>cat and dog</strong> walked on the carpet.</code></p>
<p>每一个新名词也可以被再次取代。我们可以用和之前一样的规则，用两个用 <code>and</code> 连接的词替代 <code>cat</code> 。 或者我们可以用一个不同的规则，为了给他们增加一点描述，用一个有形容词和一个名词来取代每一个名词。</p>
<p>&rsaquo; <code>The <strong>cat and mouse</strong> and dog walked on the carpet.</code></p>
<p>&rsaquo; <code>The <strong>white cat</strong> and <strong>black dog</strong> walked on the carpet.</code></p>
<p>这只是两个例子，但是英语对于单词种类的变化，操作和替换有很多不同的规则。</p>
<p>我们注意到这一点也精确的表现在编程语言中。在C语言里，<code>if</code> 语句里包含着一系列新的语句。每一个新语句也可以是另外一个 <code>if</code> 语句。这个重复的结构和替换都反应在语言的各个部位。 这些叫做 <em>(重写规则)re-write rules</em>，因为它们告诉你一个东西怎样能被另外一些东西 <em>重写</em> 。</p>
<p>&rsaquo; <code>if (x &gt; 5) { return x; }</code></p>
<p>&rsaquo; <code>if (x &gt; 5) { <strong>if (x &gt; 10) { return x; }</strong> }</code></p>
<p><em>Noam Chomsky</em> 观察的意义是重要的。它意味着虽然我们可以用特定的语言说或者写无限多的东西,并且可以用有限的重写规则来处理和理解它们。这些重写规则的集合叫做一个 <em>(语法)grammar</em>.</p>
<p>我们有几个方法来描述重写规则。其中一个方法就是原文。我们可能说一些像, &quot;一个<em>句子</em>必需包含一个<em>动词短语</em>&quot;，或者&quot;<em>动词短语</em> 可以是一个<em>动词</em>或者一个<em>副词</em>和一个<em>动词</em>&quot;。这个方法对人类来说不错，但是对于计算机来说理解起来太糢糊。编程时我们需要写更加正式的语法说明。</p>
<p>为了写一个编程语言例如我们的 Lisp ，我们需要理解它的语法。为了阅读用户的输入我们需要写一个<em>语法</em>来描述它。然后我们就可以在用户输入的时候使用它，来判断输入是否有效。我们还可以用它构建结构化的内部表达， 这将让<em>理解</em>它，<em>计算</em>它，在内部表达计算机编码都更加简单。</p>
<p>于是一个叫 <code>mpc</code> 的库便有了用武之地。</p>
<h2 id="parser-combinators">解析器组合子(Parser Combinators)</h2>
<p><code>mpc</code> 是一个可以自己写 <em>解析器组合子</em> 库。这意味着这个库可以让你构建能够理解和处理特定语言的程序。 这些叫做<em>(解析器)parsers</em>. 有很多不同的方法可以构造解析器，用一个<em>解析器组合子</em>库的优点是你构建<em>解析器</em>的过程将变得简单，只需要指定<em>语法</em> ... 之类的。</p>
<p>很多<em>解析器组合子</em>库实际上只是让你写一些<em>看起来有点像</em>一个语法的代码，而不是真正的直接指定一个语法。在很多情况下这是可以的，但是很多情况下可能会显得笨重而复杂。幸运的是 <code>mpc</code> 让我们写<em>看起来像</em>一个语法的代码， <em>或者</em> 我们可以用特殊的符号来直接写一个语法!</p>
<h2 id="">代码的语法</h2>
<p>那么，什么是<em>看起来像</em>一个语法的代码<em>? 让我们看一看 <code>mpc</code>，通过试着为一个语法写一些代码，这种语法能够识别 <a href="http://knowyourmeme.com/memes/doge" target="_blank">the language of Shiba Inu</a>. 一种如同 </em>Doge* 一样的口语。这种语言我们可以通过下面的代码定义。</p>
<p>&rsaquo; 一个 <em>形容词(Adjective)</em> 是  <em>&quot;wow&quot;</em>, <em>&quot;many&quot;</em>, <em>&quot;so&quot;</em> 或者 <em>&quot;such&quot;</em>.
&rsaquo; 一个 <em>名词(Noun)</em> 是 <em>&quot;lisp&quot;</em>, <em>&quot;language&quot;</em>, <em>&quot;c&quot;</em>, <em>&quot;book&quot;</em> 或者 <em>&quot;build&quot;</em>.
&rsaquo; 一个 <em>短语(Phrase)</em> 是一个 <em>形容词</em> 跟着一个<em>名词</em>.
&rsaquo; 一个 <em>Doge</em> 是零个或者更多的 <em>短语</em>.</p>
<p>我们可以从尝试定义<em>形容词</em>和<em>名词</em>开始。为了做这些我们要创造两个新的解析器， 表示为 <code>mpc_parser_t*</code> 类型，我们将它存储在变量 <code>Adjective</code> 和 <code>Noun</code> 中。我们用函数 <code>mpc_or</code> 来创造一个解析器，其中一个选项应该被用到，并且用函数 <code>mpc_sym</code> 来包装我们的初始字符串。</p>
<p>如果你眯着眼睛你可以试着阅读下面这段代码，就像它是我们在上面提过的规则一样。</p>
<pre><code class="lang-c"><span class="hljs-comment">/* 构造一个新解析器 'Adjective' 来识别描述 */</span>
mpc_parser_t* Adjective = mpc_or(<span class="hljs-number">4</span>,
  mpc_sym(<span class="hljs-string">"wow"</span>), mpc_sym(<span class="hljs-string">"many"</span>),
  mpc_sym(<span class="hljs-string">"so"</span>),  mpc_sym(<span class="hljs-string">"such"</span>)
);

<span class="hljs-comment">/* 构造新解析器 'Noun' 来识别东西 */</span>
mpc_parser_t* Noun = mpc_or(<span class="hljs-number">5</span>,
  mpc_sym(<span class="hljs-string">"lisp"</span>), mpc_sym(<span class="hljs-string">"language"</span>),
  mpc_sym(<span class="hljs-string">"c"</span>),    mpc_sym(<span class="hljs-string">"book"</span>),
  mpc_sym(<span class="hljs-string">"build"</span>)
);
</code></pre>
<div class="alert alert-warning">
  <strong>我如何使用 <code>mpc</code> 的函数?</strong>

  目前不用担心或者运行这一章的任何实例代码。只要阅读它并且看看你能不能理解语法背后的原理。下一章我们将会安装 <code>mpc</code> 并且使用它。
</div>

<p>为了定义 <code>短语(Phrase)</code> 我们可以参考我们已经存在的短语。我们需要使用函数 <code>mpc_and</code>，这指定了一个东西是必要的然后再加上其他东西。作为输入我们传递 <code>Adjective</code> 和 <code>Noun</code> 给它，我们早先定义的解析器。这个函数也可以接受 <code>mpcf_strfold</code> 和 <code>free</code> 做为参数，这些表明如何加入或删除这些解析器的结果。目前忽略这些函数。</p>
<pre><code class="lang-c">mpc_parser_t* Phrase = mpc_and(<span class="hljs-number">2</span>, mpcf_strfold, Adjective, Noun, <span class="hljs-built_in">free</span>);
</code></pre>
<p>为了定义一个 <em>Doge</em> 我们必需指定 <em>零个或者更多</em> 的一些解析器是必需的。为了这一点我们需要使用函数 <code>mpc_many</code>。正如前面所说的，这个函数要求特定的变量 <code>mpcf_strfold</code> 来表明这些结果如何连接在一起，我们可以忽略它。</p>
<pre><code class="lang-c">mpc_parser_t* Doge = mpc_many(mpcf_strfold, Phrase);
</code></pre>
<p>通过创造一个解析器来寻找<em>一个或者更多</em>其他的解析器时一件很酷的事情发生了。我们的 <code>Doge</code> 解析器接受任意长度的输入。这意味这它的语言是<em>无限的</em>。 这里有一些 <code>Doge</code> 可以接受的字符串的例子。就像我们在这一章的第一节发现的，我们可以用有限数目的规则创造一个无限的语言。</p>
<pre><code class="lang-c"><span class="hljs-string">"wow book such language many lisp"</span>
<span class="hljs-string">"so c such build such language"</span>
<span class="hljs-string">"many build wow c"</span>
<span class="hljs-string">""</span>
<span class="hljs-string">"wow lisp wow c many language"</span>
<span class="hljs-string">"so c"</span>
</code></pre>
<p>如果我们用更多的 <code>mpc</code> 函数，我们可以慢慢地建立解析器来解析越来越复杂的语言。The code we use <em>sort of</em> reads like a grammar, but becomes much more messy with added complexity. 因此，采取这种方法就不一定是一个简单的任务了。有一些有帮助的函数的文档都在<a href="http://github.com/orangeduck/mpc" target="_blank">mpc repository</a>，它们建立在简单的结构上，可以让繁杂的任务变得简单。这对于复杂的语言是一个简单的方法，它提供了一个细粒度很好的控制，但对我们的需求来说并不是必需的。 </p>
<h2 id="">自然语法</h2>
<p><code>mpc</code> 也允许我们写形式更加自然的语法。我们可以在一个长字符串里定义所有的事而不是用C函数这种看起来更加不像。在使用这种方法时我们不需要担心如何通过像 <code>mpcf_strfold</code>, 或者 <code>free</code> 这样的函数添加或废弃输入。 这些都被自动完成了！</p>
<p>下面是我们如何用这种方法重建上面的例子。</p>
<pre><code class="lang-c">mpc_parser_t* Adjective = mpc_new(<span class="hljs-string">"adjective"</span>);
mpc_parser_t* Noun      = mpc_new(<span class="hljs-string">"noun"</span>);
mpc_parser_t* Phrase    = mpc_new(<span class="hljs-string">"phrase"</span>);
mpc_parser_t* Doge      = mpc_new(<span class="hljs-string">"doge"</span>);

mpca_lang(MPC_LANG_DEFAULT,
  <span class="hljs-string">"                                                                     \
    adjective : \"wow\" | \"many\" | \"so\" | \"such\";                 \
    noun      : \"lisp\" | \"language\" | \"c\" | \"book\" | \"build\"; \
    phrase    : &lt;adjective&gt; &lt;noun&gt;;                                     \
    doge      : &lt;phrase&gt;*;                                              \
  "</span>,
  Adjective, Noun, Phrase, Doge);

<span class="hljs-comment">/* Do some parsing here... */</span>m

mpc_cleanup(<span class="hljs-number">4</span>, Adjective, Noun, Phrase, Doge);
</code></pre>
<p>在真正理解这个长字符串的语法之前，这种形式的语法显然<em>更清晰</em>。如果我们学习了所有这些特殊符号的意思，我们就可以眯着眼睛将它们看作一体了。</p>
<p>需要注意的另外一件事是，现在这个过程分为两个步骤。首先我们用 <code>mpc_new</code> 创造和命名了一些规则，然后我们用 <code>mpca_lang</code> 来定义它们。</p>
<p><code>mpca_lang</code> 的第一个参数是选项标志。对于这个我们只需要用默认的就可以了。第二个参数是一个很长的多行字符串。 这是 <em>(语法)grammar</em> 规范。它由一些<em>重写规则</em>组成。 每一个规则都有一个名字在它们的左边，一个冒号 <code>:</code>，在右边有一个分号 <code>;</code> 表示定义结束。</p>
<p>右手边定义这些规则的特殊符号像下面这样工作。</p>
<table class='table'>
  <tr><td><code>&quot;ab&quot;</code></td><td>字符串 <code>ab</code> 是必需的</td></tr>
  <tr><td><code>&#39;a&#39;</code></td><td>字符 <code>a</code> 是必需的</td></tr>
  <tr><td><code>&#39;a&#39; &#39;b&#39;</code></td><td>首先 <code>&#39;a&#39;</code> 是必需的，然后 <code>&#39;b&#39;</code> 是必需的</td></tr>
  <tr><td><code>&#39;a&#39; | &#39;b&#39;</code></td><td><code>a</code> 或者 <code>b</code> 是必需的</td></tr>
  <tr><td><code>&#39;a&#39;*</code></td><td>零个或者更多 <code>&#39;a&#39;</code> 是必需的</td></tr>
  <tr><td><code>&#39;a&#39;+</code></td><td>一个或者更多 <code>&#39;a&#39;</code> 是必需的</td></tr>
  <tr><td><code>&lt;abba&gt;</code></td><td>叫做 <code>abba</code> 的规则是必需的</td></tr>
</table>

<div class="alert alert-warning">
  <strong>听起来有些熟悉...</strong>

  你有注意到这些作为 <code>mpca_lang</code> 输入字符串的描述听起来像我正在指定一个语法么？ 这是因为它就是! <code>mpc</code> 使用它自己内部解析这些给 <code>mpca_lang</code> 的输入。为了做到这一点，它通过用之前的函数来指定一个语法。多么的干净利落啊。
</div>

<p>用上面描述的确认我上面写的和我们之前用代码指定的是等价的。</p>
<p>这种指定语法的方法是我们下一章将要用到的。它一开始看起来可能铺天盖地的。语法看起来不能马上被理解。但是随着我们的继续你会对如何创建和编辑它们越来越熟悉。随意创造一些符号或者符号的概念，让它们写起来更加简单。一些附加题</p>
<p>这一章是关于理论的，所以如果你要尝试附加题，不用太担心正确性。用正确的心态思考更加重要。一些附加题可能需要循环和递归的语法结构，所以如果你用到这些不要担心。</p>
<h2 id="">参考</h2>
<div class="panel-group alert alert-warning" id="accordion">

  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
          doge_code.c
        </a>
      </h4>
    </div>
    <div id="collapseOne" class="panel-collapse collapse">
      <div class="panel-body">
<code>c
#include &quot;mpc.h&quot;

int main(int argc, char** argv) {

  /* Build a new parser &#39;Adjective&#39; to recognize descriptions */
  mpc_parser_t* Adjective = mpc_or(4,
    mpc_sym(&quot;wow&quot;), mpc_sym(&quot;many&quot;),
    mpc_sym(&quot;so&quot;),  mpc_sym(&quot;such&quot;)
  );

  /* Build a new parser &#39;Noun&#39; to recognize things */
  mpc_parser_t* Noun = mpc_or(5,
    mpc_sym(&quot;lisp&quot;), mpc_sym(&quot;language&quot;),
    mpc_sym(&quot;c&quot;),    mpc_sym(&quot;book&quot;),
    mpc_sym(&quot;build&quot;)
  );

  mpc_parser_t* Phrase = mpc_and(2, mpcf_strfold, Adjective, Noun, free);

  mpc_parser_t* Doge = mpc_many(mpcf_strfold, Phrase);

  /* Do some parsing here... */

  mpc_delete(Doge);

  return 0;

}</code>
      </div>
    </div>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
          doge_grammar.c
        </a>
      </h4>
    </div>
    <div id="collapseTwo" class="panel-collapse collapse">
      <div class="panel-body">
<code>c
#include &quot;mpc.h&quot;

int main(int argc, char** argv) {

  mpc_parser_t* Adjective = mpc_new(&quot;adjective&quot;);
  mpc_parser_t* Noun      = mpc_new(&quot;noun&quot;);
  mpc_parser_t* Phrase    = mpc_new(&quot;phrase&quot;);
  mpc_parser_t* Doge      = mpc_new(&quot;doge&quot;);

  mpca_lang(MPC_LANG_DEFAULT,
    &quot;                                                                     \
      adjective : \&quot;wow\&quot; | \&quot;many\&quot; | \&quot;so\&quot; | \&quot;such\&quot;;                 \
      noun      : \&quot;lisp\&quot; | \&quot;language\&quot; | \&quot;c\&quot; | \&quot;book\&quot; | \&quot;build\&quot;; \
      phrase    : &lt;adjective&gt; &lt;noun&gt;;                                     \
      doge      : &lt;phrase&gt;*;                                              \
    &quot;,
    Adjective, Noun, Phrase, Doge);

  /* Do some parsing here... */

  mpc_cleanup(4, Adjective, Noun, Phrase, Doge);

  return 0;

}</code>
      </div>
    </div>
  </div>

<p></div></p>
<h2 id="">附加题</h2>
<div class="alert alert-warning">
  <ul class="list-group">
    <li class="list-group-item">&rsaquo; 尝试写出更多 <code>Doge</code> 语言的字符串</li>
    <li class="list-group-item">&rsaquo; 为什么语法中在引号 <code>&quot;</code> 的前面会有反斜线 <code>\</code> ?</li>
    <li class="list-group-item">&rsaquo; 为什么语法中在行的结尾有反斜线 <code>\</code> ?</li>
    <li class="list-group-item">&rsaquo; 用文字描述十进制例如 <code>0.01</code> 或者 <code>52.221</code> 的语法</li>
    <li class="list-group-item">&rsaquo; 用文字描述网址例如 <code>http://www.buildyourownlisp.com</code> 的语法</li>
    <li class="list-group-item">&rsaquo; 用文字描述简单的英语句子例如 <code>the cat sat on the mat</code> 的语法</li>
    <li class="list-group-item">&rsaquo; 用更正式的方法描述上面的语法。用 <code>|</code>, <code>*</code> 或者任何你发明的符号</li>
    <li class="list-group-item">&rsaquo; 如果你熟悉 JSON，用文字来描述它的语法。</li>
  </ul>
</div>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="./interactive_prompt.html" class="navigation navigation-prev " aria-label="Previous page: Interactive Prompt"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./parsing.html" class="navigation navigation-next " aria-label="Next page: Parsing"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
<script src="gitbook/app.js"></script>

    
    <script src="https://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
